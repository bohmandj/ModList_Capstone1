{% extends 'base.html' %}

{% block title %}{{ modlist.name }}{% endblock %}

{% block content %}

<div class="modlistpage">
    <div class="card-page">
        <div class="modlist-header">
            <div class="modlist-detail-background">
                <img src="/static/images/GamesOnNexus_300_16x9.png" alt="{{ modlist.name }} image">
            </div>
            <div class="modlist-detail">
                <div class="modlist-detail-title">
                    <h1>{{ modlist.name }}</h1>
                    <div class="modlist-credits">
                        <h6>Imported From:
                            <a href="https://www.nexusmods.com/mods/trackingcentre">
                                Nexus Tracking Centre
                            </a>
                        </h6>
                        <h6>For User:
                            <a href="{{ url_for('show_user_page', user_id=g.user.id) }}">
                                {{ g.user.username }}
                            </a>
                        </h6>
                    </div>
                </div>
                <h5>{{ modlist.description }}</h5>
            </div>
        </div>

        <a href="">
            <button class="btn btn-outline-nexus">Re-Sync Tracked Mods to Nexus</button>
        </a>

        <div class="tracked-mod-tabs">
            {% if tab == 'tracked-mods' %}
            <div class="tab selected-tab">
                <h5>Imported Tracked Mods</h5>
            </div>
            <div class="tab unselected-tab">
                <a href="{{ url_for('show_tracked_modlist_page', tab='keep-tracked-mods') }}">
                    <h5>Keep-Tracked Mods</h5>
                </a>
            </div>
            {% else %} {# if tab == 'keep-tracked-mods' #}
            <div class="tab unselected-tab">
                <a href="{{ url_for('show_tracked_modlist_page', tab='tracked-mods') }}">
                    <h5>Imported Tracked Mods</h5>
                </a>
            </div>
            <div class="tab selected-tab">
                <h5>Keep-Tracked Mods</h5>
            </div>
            {% endif %}{# ends 'if tab == Tracked' #}
        </div>

        <div class="tracked-mods-container">
            {% if page_mods.items != [] %}
            {% for mod in page_mods %}
            <div class="tracked-mod">
                {% if mod.picture_url != 'None' %}
                {% if mod.is_nsfw and g.user.hide_nsfw == True %}{# handle nsfw mod image censorship #}
                <div class="nsfw">
                    <img class="mod-image" src="{{ mod.picture_url }}" alt="{{ mod.name }} title image"
                        title="NSFW visibility can be changed in user settings">
                </div>
                {% else %}{# mod is not nsfw #}
                <img class="mod-image" src="{{ mod.picture_url }}" alt="{{ mod.name }} title image"
                    title="{{ mod.name }} title image">
                {% endif %}{# ends 'if mod.is_nsfw' #}
                {% else %}{# handle missing picture_url #}
                <div class="img">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                        width="256" viewBox="0 0 256 256" xml:space="preserve">
                        <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;"
                            transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)">
                            <path
                                d="M 87 19.986 c -1.657 0 -3 1.343 -3 3 v 44.027 c 0 0.999 -0.295 1.924 -0.781 2.72 L 63.005 49.021 c -1.111 -1.137 -2.916 -1.213 -4.116 -0.168 L 45.173 60.779 l -1.383 -1.422 c -1.155 -1.188 -3.054 -1.215 -4.242 -0.059 c -1.188 1.154 -1.214 3.054 -0.06 4.242 l 3.361 3.456 c 1.11 1.142 2.919 1.218 4.12 0.172 l 13.72 -11.93 l 16.619 17.029 H 25.623 c -1.657 0 -3 1.343 -3 3 s 1.343 3 3 3 h 53.122 c 2.188 0 4.226 -0.638 5.955 -1.722 c 0.047 -0.028 0.094 -0.054 0.14 -0.085 C 87.94 74.454 90 70.973 90 67.014 V 22.986 C 90 21.33 88.657 19.986 87 19.986 z"
                                style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(173,173,173); fill-rule: nonzero; opacity: 1;"
                                transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                            <path
                                d="M 89.233 5.323 c -1.106 -1.232 -3.004 -1.336 -4.236 -0.23 l -7.401 6.638 H 11.255 C 5.049 11.731 0 16.78 0 22.986 v 44.027 c 0 4.027 2.133 7.557 5.323 9.546 l -4.326 3.88 c -1.233 1.106 -1.336 3.003 -0.23 4.236 c 0.593 0.661 1.412 0.997 2.234 0.997 c 0.713 0 1.429 -0.253 2.002 -0.767 l 84 -75.348 C 90.236 8.453 90.34 6.556 89.233 5.323 z M 11.255 17.731 h 59.652 L 34.802 50.117 l -8.927 -9.179 c -1.124 -1.155 -2.958 -1.217 -4.155 -0.14 L 6 54.923 V 22.986 C 6 20.088 8.357 17.731 11.255 17.731 z M 6 67.014 v -4.025 l 17.584 -15.8 l 6.748 6.938 L 10.223 72.164 C 7.818 71.683 6 69.558 6 67.014 z"
                                style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(173,173,173); fill-rule: nonzero; opacity: 1;"
                                transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                            <circle cx="33.167" cy="29.037" r="6.047"
                                style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(173,173,173); fill-rule: nonzero; opacity: 1;"
                                transform="  matrix(1 0 0 1 0 0) " />
                        </g>
                    </svg>
                </div>
                {% endif %}{# ends 'if mod.picture_url != None' #}

                <div class="mod-info-and-buttons">
                    <div class="tracked-mod-section mod-info">
                        <a
                            href="{{ url_for('show_mod_page', game_domain_name=mod.for_games[0].domain_name, mod_id=mod.id) }}">
                            <h4>{{ mod.name }}</h4>
                        </a>
                        <p>Author:
                            <a href="https://next.nexusmods.com/profile/{{ mod.uploaded_by }}/mods">
                                {{ mod.uploaded_by }}
                            </a>
                        </p>
                        <p>Game:
                            <a href="https://next.nexusmods.com/profile/{{ mod.uploaded_by }}/mods">
                                {{ mod.for_games[0].name }}
                            </a>
                        </p>
                    </div>

                    <div class="mod-buttons">
                        <div class="buttons-subset">
                            <a href="{{ url_for('modlist_add_mod', user_id=g.user.id, mod_id=mod.id) }}"
                                title="Add {{mod.name}} to one of your modlist">
                                <button class="btn btn-outline-primary btn-sm">Add Mod to ModList</button>
                            </a>
                            <a href=""
                                title="Add a 'Keep Tracked' tag to this mod, moving it to the 'Keep-Tracked Mods' tab of your 'Nexus Tracked Mods' modlist">
                                <button class="btn btn-outline-success btn-sm">Add to Keep Tracked</button>
                            </a>
                        </div>
                        <div class="buttons-subset">
                            <a href="https://www.nexusmods.com/{{mod.for_games[0].domain_name}}/mods/{{mod.id}}"
                                title="Open mod in a new tab on Nexus.com to see full details and download files">
                                <button class="btn btn-outline-nexus btn-sm">
                                    See on Nexus
                                </button>
                            </a>
                            <a href=""
                                title="Removes this mod from your 'Nexus Tracked Mods' modlist on this site, as well as Un-tracking this mod on Nexus and removing it from your Nexus Tracking Centre">
                                <button class="btn btn-outline-nexus btn-sm">Un-track on Nexus</button>
                            </a>
                        </div>
                    </div>
                </div>

            </div>
            {% endfor %}{# ends 'for mod in page_mods' #}

            {% else %}{# handle empty page_mods.items #}
            {% if tab == 'tracked-mods' %}{# handle no mods in tracked list #}
            <div class="tracked-mod">
                <img class="mod-img" src="/static/images/GamesOnNexus_300_3x4.png" alt="Empty ModList cover image"
                    title="Empty ModList cover image">
                <div class="mod-info-and-buttons">
                    <div class="tracked-mod-section mod-info">
                        <h4 class="mb-2">No mods added to 'Nexus Tracked Mods' modlist yet...</h4>
                        <p class="mb-2">The easiest way to find new mods is to search on
                            <a href="https://www.nexusmods.com/" style="color: #D98F40">Nexus.com</a>
                            . While browsing mods, use the 'Tracking' feature on
                            Nexus to easily collect mods. This modlist, 'Nexus Tracked Mods', will automatically
                            import all Tracked mods from Nexus. Then add mods to your various modlists from there.
                        </p>
                        <p class="mb-3">'Tracking' and your 'Tracking Centre' on Nexus is intended to help you keep
                            track of
                            installed
                            mods for update notifications. To make sure you don't accidentally un-track any mods you
                            want to
                            keep in your Tracking Centre, click the 'Keep Tracked' button for that mod in this modlist.
                            From
                            here you can also add imported mods to your other modlists, or easily un-track mods you
                            tracked just to import here and don't want to keep in your Nexus Tracking Centre.</p>
                    </div>

                    <div class="buttons">
                        https://www.nexusmods.com/
                    </div>
                </div>
                {% else %}{# handle no mods in keep-tracked list #}
                <div class="tracked-mod">
                    <img class="mod-img" src="/static/images/GamesOnNexus_300_3x4.png" alt="Empty ModList cover image"
                        title="Empty ModList cover image">
                    <div class="mod-info-and-buttons" style="padding-left: 15px;">
                        <div class="tracked-mod-section mod-info" style="margin-bottom: auto;">
                            <h4 class="mb-2">No tracked mods marked 'Keep-Tracked' yet...</h4>
                            <p class="mb-2">'Tracking' and your 'Tracking Centre' on Nexus is intended to help you keep
                                track of
                                installed mods for update notifications. To make sure you don't accidentally un-track
                                any mods you want to keep in your Tracking Centre, click the 'Keep Tracked' button for
                                that mod on the 'Imported Tracked Mods' tab of this modlist.</p>
                            <p class="mb-3">From here you can also add imported mods to your other modlists, or easily
                                un-track mods
                                you tracked just to import here and don't want to keep in your Nexus Tracking Centre.
                            </p>
                        </div>

                        <a href="https://www.nexusmods.com/" style="height: fit-content; margin-top: auto;"
                            title="Go to Nexus.com to search for mods! On mods you want to import to this list, click 'Tracking' on a mod on Nexus, and it will automatically import here when you log in, or hit the 'Re-Sync with Nexus Tracking Centre' button on this page.">
                            <button class="btn btn-nexus" style="height: fit-content;">Browse mods on
                                Nexus!</button>
                        </a>
                    </div>
                </div>
            </div>
            {% endif %}{# ends 'if tab == tracked-mods' #}
            {% endif %}{# ends 'if page_mods.items == []' #}
        </div>

        <div class="page-selector">
            <span>Mods {{ page_mods.first }} - {{ page_mods.last }} of {{ page_mods.total }}</span>
            <div class=pagination>
                {% if page_mods.has_prev %}
                <a href="{{ url_for('show_tracked_modlist_page', tab=tab, page=page_mods.prev_num, per_page=per_page) }}"
                    class="pagination-section page-num">
                    <svg xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 320 512"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                        <path
                            d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z" />
                    </svg>
                </a>
                {% endif %}
                {% for page in page_mods.iter_pages() %}
                {% if page %}
                <a href="{{ url_for('show_tracked_modlist_page', tab=tab, page=page, per_page=per_page) }}"
                    class="pagination-section page-num">
                    {% if page != page_mods.page %}
                    {{ page }}
                    {% else %}
                    <strong>{{ page }}</strong>
                    {% endif %}
                </a>
                {% else %}
                <div class="pagination-section"><span class=ellipsis>…</span></div>

                {% endif %}
                {% endfor %}
                {% if page_mods.has_next %}
                <a href="{{ url_for('show_tracked_modlist_page', tab=tab, page=page_mods.next_num, per_page=per_page) }}"
                    class="pagination-section page-num">
                    <svg xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 320 512"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                        <path
                            d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z" />
                    </svg>
                </a>
                {% endif %}
            </div>
        </div>

    </div>
</div>

{% endblock %}